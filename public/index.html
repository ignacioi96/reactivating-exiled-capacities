<!DOCTYPE html>
<html lang="en-us">
<head>
	<meta name="generator" content="Hugo 0.148.2"><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    
    <title>Reactivating Exiled Capacities</title>
    
    
    <meta name="description" content="Rediscovering forgotten human abilities and talents through an interconnected, network-based approach">
    

    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/7.8.5/d3.min.js"></script>

    
    <link rel="stylesheet" href="http://localhost:1313/css/main.min.css">

    
    
    <script src="https://identity.netlify.com/v1/netlify-identity-widget.js"></script>
    
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            line-height: 1.6;
            color: #333;
            background-color: #fff;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }
        
        header {
            background: #f8f9fa;
            padding: 1rem 0;
            border-bottom: 1px solid #e9ecef;
        }
        
         
        
        main {
            min-height: 60vh;
        }
        
         
        main:not(.home-main) {
            padding: 2rem 0;
        }
        
        footer {
            background: #343a40;
            color: white;
            text-align: center;
            padding: 2rem 0;
            margin-top: 4rem;
        }
        
        h1, h2, h3 {
            margin-bottom: 1rem;
        }
        
        .story-list {
            display: grid;
            gap: 2rem;
            margin-top: 2rem;
        }
        
        .story-card {
            border: 1px solid #e9ecef;
            border-radius: 8px;
            padding: 1.5rem;
            transition: box-shadow 0.3s ease;
        }
        
        .story-card:hover {
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }
        
        .story-meta {
            color: #666;
            font-size: 0.9rem;
            margin-bottom: 0.5rem;
        }
        
        .btn {
            display: inline-block;
            padding: 0.5rem 1rem;
            background: #007bff;
            color: white;
            text-decoration: none;
            border-radius: 4px;
            margin-top: 1rem;
        }
        
        .btn:hover {
            background: #0056b3;
        }
        
        @media (max-width: 768px) {
            nav ul {
                flex-direction: column;
                gap: 1rem;
            }
            
            .container {
                padding: 0 10px;
            }
        }
    </style>
    
    
</head>
<body>
    <header>
    <div class="container">
        <nav class="main-nav">
            
            <div class="nav-brand">
                <a href="/" class="site-title">Reactivating Exiled Capacities</a>
            </div>
            
            
            <ul class="nav-links desktop-nav">
                <li><a href="/">Home</a></li>
                <li><a href="/about/">About</a></li>
                <li><a href="/mapping-capacities/">Mapping Capacities</a></li>
            </ul>
            
            
            <button class="mobile-menu-btn" id="mobile-menu-btn" aria-label="Toggle Menu">
                <span class="hamburger"></span>
                <span class="hamburger"></span>
                <span class="hamburger"></span>
            </button>
            
            
            <div class="mobile-nav" id="mobile-nav">
                <ul class="mobile-nav-links">
                    <li><a href="/">Home</a></li>
                    <li><a href="/about/">About</a></li>
                    <li><a href="/mapping-capacities/">Mapping Capacities</a></li>
                </ul>
            </div>
        </nav>
    </div>
</header>

<style>
 
header {
    background: #f8f9fa;
    padding: 1rem 0;
    border-bottom: 1px solid #e9ecef;
    position: relative;
    z-index: 100;
}

.main-nav {
    display: flex;
    justify-content: space-between;
    align-items: center;
    position: relative;
}

.nav-brand .site-title {
    font-size: 1.5rem;
    font-weight: 700;
    color: #333;
    text-decoration: none;
    transition: color 0.3s ease;
}

.nav-brand .site-title:hover {
    color: #a855f7;
}

 
.desktop-nav {
    list-style: none;
    display: flex;
    gap: 2.5rem;  
    margin: 0;
    padding: 0;
    align-items: center;
}

.desktop-nav a {
    text-decoration: none;
    color: #333;
    font-weight: 500;
    font-size: 1rem;
    padding: 0.5rem 1rem;
    border-radius: 6px;
    transition: all 0.3s ease;
    position: relative;
}

.desktop-nav a:hover {
    color: #a855f7;
    background: rgba(168, 85, 247, 0.1);
    transform: translateY(-1px);
}

 
.desktop-nav a.active {
    color: #a855f7;
    background: rgba(168, 85, 247, 0.15);
}

 
.mobile-menu-btn {
    display: none;
    flex-direction: column;
    background: none;
    border: none;
    cursor: pointer;
    padding: 0.5rem;
    gap: 4px;
}

.hamburger {
    width: 25px;
    height: 3px;
    background: #333;
    transition: all 0.3s ease;
    border-radius: 2px;
}

.mobile-menu-btn.active .hamburger:nth-child(1) {
    transform: rotate(45deg) translate(6px, 6px);
}

.mobile-menu-btn.active .hamburger:nth-child(2) {
    opacity: 0;
}

.mobile-menu-btn.active .hamburger:nth-child(3) {
    transform: rotate(-45deg) translate(6px, -6px);
}

 
.mobile-nav {
    position: absolute;
    top: 100%;
    right: 0;
    background: #f8f9fa;
    border: 1px solid #e9ecef;
    border-radius: 8px;
    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
    transform: translateY(-10px);
    opacity: 0;
    visibility: hidden;
    transition: all 0.3s ease;
    min-width: 200px;
    z-index: 1000;
}

.mobile-nav.active {
    transform: translateY(0);
    opacity: 1;
    visibility: visible;
}

.mobile-nav-links {
    list-style: none;
    margin: 0;
    padding: 0.5rem 0;
}

.mobile-nav-links li {
    padding: 0;
}

.mobile-nav-links a {
    display: block;
    padding: 0.75rem 1.5rem;
    color: #333;
    text-decoration: none;
    font-weight: 500;
    transition: all 0.3s ease;
}

.mobile-nav-links a:hover {
    background: rgba(168, 85, 247, 0.1);
    color: #a855f7;
}

 
@media (max-width: 768px) {
    .desktop-nav {
        display: none;
    }
    
    .mobile-menu-btn {
        display: flex;
    }
    
    .main-nav {
        position: relative;
    }
}

@media (max-width: 480px) {
    .nav-brand .site-title {
        font-size: 1.3rem;
    }
    
    .mobile-nav {
        right: -10px;
        left: -10px;
        min-width: auto;
    }
}

 
@media (min-width: 1200px) {
    .desktop-nav {
        gap: 3rem;
    }
}
</style>

<script>

document.addEventListener('DOMContentLoaded', function() {
    const mobileMenuBtn = document.getElementById('mobile-menu-btn');
    const mobileNav = document.getElementById('mobile-nav');
    
    if (mobileMenuBtn && mobileNav) {
        mobileMenuBtn.addEventListener('click', function() {
            mobileMenuBtn.classList.toggle('active');
            mobileNav.classList.toggle('active');
        });
        
        
        document.addEventListener('click', function(e) {
            if (!mobileMenuBtn.contains(e.target) && !mobileNav.contains(e.target)) {
                mobileMenuBtn.classList.remove('active');
                mobileNav.classList.remove('active');
            }
        });
        
        
        window.addEventListener('resize', function() {
            if (window.innerWidth > 768) {
                mobileMenuBtn.classList.remove('active');
                mobileNav.classList.remove('active');
            }
        });
    }
});
</script>
    
    <main class="home-main">
        <div class="container">
            
</div> 

<div class="clusters-layout">
    <aside class="clusters-sidebar">
        <div class="container">
            <h2>Clusters</h2>
            <ul class="cluster-list" id="cluster-list">
                <li style="color: #cbd5e1; padding: 20px; text-align: center;">Loading clusters...</li>
            </ul>
        </div>
    </aside>

    <div class="content-area">
        <div class="thumbnails-container" id="thumbnails-container">
            <div style="color: #cbd5e1; padding: 50px; text-align: center; font-size: 1.2rem;">Loading visualization...</div>
        </div>
    </div>
</div>

<div class="container"> 


<div class="cluster-modal" id="cluster-modal">
    <div class="modal-content">
        <button class="close-modal" id="close-modal">&times;</button>
        
        <div class="modal-header" id="modal-header">
            <h2 class="modal-title" id="modal-title"></h2>
            <p class="modal-description" id="modal-description"></p>
            <div class="why-matters" id="why-matters"></div>
        </div>
        
        <div class="network-container">
            <svg class="network-svg" id="network-svg"></svg>
        </div>
    </div>
    
    
    <div class="capacity-detail" id="capacity-detail">
        <button class="close-detail" id="close-detail">&times;</button>
        <h3 id="capacity-title"></h3>
        <p class="subtitle" id="capacity-subtitle"></p>
        <div class="detail-section">
            <h4>What it is</h4>
            <div id="capacity-what-it-is"></div>
        </div>
        <div class="detail-section">
            <h4>Why it's been exiled</h4>
            <div id="capacity-why-exiled"></div>
        </div>
        <div class="detail-section">
            <h4>What it makes possible</h4>
            <div id="capacity-what-possible"></div>
        </div>
        <div class="detail-section">
            <h4>Distortions</h4>
            <ul class="distortions-list" id="capacity-distortions"></ul>
        </div>
    </div>
</div>


<script id="clusters-data" type="application/json">[{
        "title": "\"Liminal Capacities\"",
        "description": "\"The art of dwelling in thresholds—between endings and beginnings, certainty and mystery, breakdown and emergence.\"",
        "why_matters": "\"Modernity denies liminal space. It rushes to resolution, treats grief as something to manage or overcome, and numbs collective pain into individualized pathology. This leaves us ill-equipped to feel what must be felt, to metabolize the systemic denial of pain, or to process the emotional fields that arise in times of transition and collapse. These capacities allow us to stay with the field long enough to grieve collectively, to compost what's dissolving, and to invite what's emerging without forcing it.\"",
        "image": "\"images/liminal-capacities.jpg\"",
        "position_x":  0.25 ,
        "position_y":  0.8 ,
        "capacities": [{
            "title": "\"Humor as Rupture\"",
            "subtitle": "\"Laughter as a crack in the wall of authority\"",
            "what_it_is": "\"Humor as release and rupture. As a crack in the wall of authority, unrestricted autonomy, arbitration, affirmation. Clowning as a practice reminds us that we are not the center, that our need for righteousness, certainty, looking good, is part of the disease. This is the work of humor as humility—the capacity to fumble publicly and to openly and honestly look at our addictions to superiority in order to let failure become relational compost. When the clown stumbles, when we laugh at her, we are laughing at our own illusions—the part of us addicted to control, coherence, and exceptionalism.\"",
            "why_exiled": "\"Modernity treats failure as shame and humor as distraction—because both threaten the fragile scaffolding of superiority.\"",
            "what_possible": "\"Humor as humility allows us to compost these addictions. It makes room for failure without collapse, for truth without control, for presence without performance. It loosens the tapeworm's grip—not through force, but through laughter.\"",
            "distortions": [{
                "name": "\"Deflective humor\"",
                "description": "\"Using humor to avoid or distract from necessary discomfort rather than to rupture illusions of control.\""
              },{
                "name": "\"Performative vulnerability\"",
                "description": "\"Staging fumbles or failures for social approval rather than allowing genuine interruption of superiority patterns.\""
              }],
            "color": "\"f59e0b\"",
            "position_x":  -0.4 ,
            "position_y":  -0.1 
          },{
            "title": "\"Staying with(in) Emergence - 'Azar'\"",
            "subtitle": "\"Dancing with chance, randomness, the unknown\"",
            "what_it_is": "\"This capacity is an invitation to walk the tightrope between naive hope and desperate hopelessness—which are both expressions of certainty addiction—ways of trying to predict or control what's to come. But Azar—chance, randomness, emergence—has no allegiance to certainty. Azar is the spirit of the unknown. The fool walks into the scene without a script. Play is not a distraction—it's a relational practice with the unknown. Dancing with Azar is the capacity to stay with emergence—to feel the field shifting, to invite chance in, to let randomness be a co-facilitator.\"",
            "why_exiled": "\"Modernity demands predictability, control, and strategic certainty. Emergence threatens planning, efficiency, and the illusion of mastery over outcomes.\"",
            "what_possible": "\"Dancing with Azar lets experimentation return—not through rigid strategy, but through relational improvisation. It brings curiosity back into the room and allows for genuine co-creation with the unknown.\"",
            "distortions": [{
                "name": "\"Spiritual bypassing\"",
                "description": "\"Using 'trust in emergence' to avoid necessary planning, accountability, or difficult decisions.\""
              },{
                "name": "\"Chaos addiction\"",
                "description": "\"Creating unnecessary disruption or unpredictability as a way to avoid deeper engagement with what's actually emerging.\""
              }],
            "color": "\"eab308\"",
            "position_x":  0.5 ,
            "position_y":  0.2 
          },{
            "title": "\"Inhabiting Liminality\"",
            "subtitle": "\"Dwelling in the space between endings and beginnings\"",
            "what_it_is": "\"To inhabit liminality is to dwell in the space between endings and beginnings, where nothing feels certain, where identities dissolve but have not yet reformed. This space is often thick with feeling—not just personal emotions, but meta-affective landscapes: the collective weight of grief, longing, anger, emptiness, and the awe that flickers through even in the fog. This capacity asks: Can you stay in the fog? Can you hold the weight of the field without rushing to rebuild identity or make meaning? Can you listen to grief as a teacher, without needing to fix it or flee?\"",
            "why_exiled": "\"Modernity denies liminal space. It rushes to resolution, treats grief as something to manage or overcome, and numbs collective pain into individualized pathology. This leaves us ill-equipped to feel what must be felt, to metabolize the systemic denial of pain, or to process the emotional fields that arise in times of transition and collapse.\"",
            "what_possible": "\"Reclaiming Inhabiting Liminality allows us to stay with the field long enough to grieve collectively, to compost what's dissolving, and to invite what's emerging without forcing it. It's the capacity to be interrupted by the full spectrum of feeling, and to respond with attuned care, knowing that collective hearts can hold what individual hearts cannot.\"",
            "distortions": [{
                "name": "\"Glorifying suffering\"",
                "description": "\"Romanticizing pain or liminal states as inherently spiritual or superior, rather than metabolizing them as necessary passages.\""
              },{
                "name": "\"Liminal addiction\"",
                "description": "\"Getting stuck in the threshold as a way to avoid commitment, responsibility, or the work of emergence.\""
              },{
                "name": "\"Emotional bypassing\"",
                "description": "\"Using the language of 'collective grief' to avoid personal accountability or specific relational repair.\""
              }],
            "color": "\"d97706\"",
            "position_x":  0.1 ,
            "position_y":  0.45 
          }]
      },{
        "title": "\"Poly-Rhythmic Knowing\"",
        "description": "\"The Art of Relating to Knowings as Tempos—recognizing layers, braiding between layers, and holding layers simultaneously.\"",
        "why_matters": "\"Colonial modernity flattens complexity into singular tempos of knowing—logocentric, binary, universal. It treats knowing (i.e epistemologies, ontologies, and methods) as fixed structures to be understood or controlled, rather than rhythms to be felt and related to. The invitation with this cluster is to relate to ideas, methods, epistemologies, and ontologies as tempos as opposed to singular beats to collapse into coherence. It invites us to see reality through layered, pulsing patterns that resist synchronization. It's less about finding one rhythm and more about learning to feel the polyrhythmic field. It teaches us to recognize layers, braid between layers, and hold layers simultaneously—without needing to resolve or collapse them.\"",
        "image": "\"/images/poly-rhythmic-knowing.jpg\"",
        "position_x":  0.85 ,
        "position_y":  0.65 ,
        "capacities": [{
            "title": "\"Epistemic Polyphony\"",
            "subtitle": "\"Recognizing multiple ways of knowing as indispensable and insufficient\"",
            "what_it_is": "\"This capacity is the foundational polyphonic awareness: the ability to hear multiple knowings at once—scientific, ancestral, ecological, embodied, historical—without needing them to collapse into agreement. Each knowing carries its own tempo, scale, and logic. Each is true, each is partial. This is like polyphony in music: multiple independent melodies coexist, weaving texture without resolving into unison. It's not harmony—the knowings retain their autonomy, but relate in their difference.\"",
            "why_exiled": "\"Modernity demands a singular beat—usually Western, rational, and dominant. Other epistemologies are treated as secondary, mystical, or primitive.\"",
            "what_possible": "\"Epistemic Polyphony refuses this erasure and reclaims plurality as baseline—letting the choir of knowings be heard, even when dissonant.\"",
            "distortions": [{
                "name": "\"Tokenism\"",
                "description": "\"Naming other knowings without letting them interrupt or reshape your own.\""
              },{
                "name": "\"Epistemic relativism\"",
                "description": "\"Flattening all knowings into 'equally valid' without attending to power dynamics or historical context.\""
              }],
            "color": "\"10b981\"",
            "position_x":  -0.3 ,
            "position_y":  -0.4 
          },{
            "title": "\"Dissonant Holding\"",
            "subtitle": "\"Staying with epistemic friction long enough to feel the chord beneath it\"",
            "what_it_is": "\"This is the capacity to hold multiple knowings or rhythms simultaneously, even when they don't harmonize or resolve. It's the embodied metabolizing of friction, syncopation, and incommensurability—without collapsing into coherence or fleeing the dissonance. In polyrhythmic theory, multiple rhythms played simultaneously can feel dissonant at one tempo but become resonance at another scale. At the micro-level, different knowings feel incommensurable, conflicting. At the macro-level, those same knowings form a complex chord that only exists because of their friction, their difference, their syncopation.\"",
            "why_exiled": "\"Western traditions often favor harmony, unison, and resolution—flattening rhythms or layering them in ways that prioritize coherence over the relational space between differences.\"",
            "what_possible": "\"Dissonant Holding reclaims the polyphonic principle: that difference itself is the rhythm. It allows for staying with complexity without premature resolution.\"",
            "distortions": [{
                "name": "\"Coherence addiction\"",
                "description": "\"The compulsive need to resolve dissonance into harmony, missing the intelligence that lives in the friction.\""
              },{
                "name": "\"Dissonance addiction\"",
                "description": "\"Creating or maintaining conflict as a way to avoid the deeper work of finding relationship across difference.\""
              }],
            "color": "\"059669\"",
            "position_x":  0.4 ,
            "position_y":  0.3 
          },{
            "title": "\"Translational Attunement\"",
            "subtitle": "\"Flowing between epistemologies without flattening any of them\"",
            "what_it_is": "\"This capacity is about moving between different rhythms of knowing—like a musician shifting between polyrhythms without losing the distinct tempo of each. It's translational humility: recognizing that something is always lost in translation. You don't collapse one knowing into another. You flow between them, honoring their difference, adjusting your tempo without diminishing the tempo you just left. Like moving between polyrhythms, this is not about finding the sync—it's about finding the relationship between tempos.\"",
            "why_exiled": "\"Academic and institutional cultures demand translation into dominant epistemological frameworks, flattening the texture and rhythm of non-dominant ways of knowing.\"",
            "what_possible": "\"Translational Attunement allows for cross-epistemic dialogue without colonization—maintaining the integrity of each knowing while finding points of resonance and relationship.\"",
            "distortions": [{
                "name": "\"Over-translating\"",
                "description": "\"Explaining away the friction, smoothing edges until difference disappears.\""
              },{
                "name": "\"Universalism\"",
                "description": "\"Believing that moving between knowings makes them 'the same deep down.' (They're not.)\""
              },{
                "name": "\"Intellectual appropriation\"",
                "description": "\"Taking concepts from other epistemologies without understanding their relational context or accountability structures.\""
              }],
            "color": "\"047857\"",
            "position_x":  0.2 ,
            "position_y":  -0.2 
          }]
      },{
        "title": "\"Regenerative Regulation\"",
        "description": "\"The Metabolic Core - Nervous system as web, bridge, and compost heap.\"",
        "why_matters": "\"Modernity, through its demand for speed, control, and coherence, trains our nervous systems to interpret complexity as danger. The consequence is what we call narrow boundary response: binary thinking, reactive behavior, simplified identity defense, and disconnection from relational context. This cluster supports the capacity to feel complex, layered realities without collapsing into defensiveness or savior urgency. It is the process of re-patterning the nervous system not just to survive, but to become metabolically capable of staying with contradiction, discomfort, and deep time responsibility. The pathway goes: from self-regulation (I can stay with myself), to co-regulation (I can stay with you/us/the land), to meta-regulation (I can stay with the whole metabolic field—including what came before and what comes after).\"",
        "image": "\"/images/regenerative-regulation.jpg\"",
        "position_x":  0.15 ,
        "position_y":  0.25 ,
        "capacities": [{
            "title": "\"Self-Regulation\"",
            "subtitle": "\"Attuning to Presence\"",
            "what_it_is": "\"The capacity to shift from reactive states—fight, flight, freeze—into sober, curious presence. It grounds the nervous system without forcing coherence, allowing grief, contradiction, sensation, and uncertainty to coexist. Rooted in polyvagal theory, this isn't just calming down—it's learning to orient your system toward complexity without threat.\"",
            "why_exiled": "\"Modernity exiles self-regulation by reducing it to a product for personal optimization—meditate so you can perform better. This isolates the nervous system from its collective and ecological context and turns regulation into a privatized act.\"",
            "what_possible": "\"Reclaiming self-regulation as a relational practice makes it possible to soften the narrow boundary condition and create the inner spaciousness necessary for non-binary thinking. It becomes a way to pause before collapse.\"",
            "distortions": [{
                "name": "\"Collapse anxiety\"",
                "description": "\"A form of nervous system overload that emerges when the body feels the weight of systemic grief or planetary despair and freezes. Often misinterpreted as apathy or inaction, but is actually a form of paralyzed overwhelm.\""
              },{
                "name": "\"Identity-protective regulation\"",
                "description": "\"Happens when the nervous system reacts defensively in order to maintain social standing, purity, or innocence. Instead of metabolizing complexity, it fortifies rigid identities to avoid discomfort.\""
              }],
            "color": "\"8b5cf6\"",
            "position_x":  -0.4 ,
            "position_y":  -0.3 
          },{
            "title": "\"Co-Regulation\"",
            "subtitle": "\"Entering the Shared Field\"",
            "what_it_is": "\"The capacity to resonate with others without merging, fixing, or disappearing. It includes sensing the nervous systems of others (human and more-than-human) as part of a larger field—and responding with reciprocity. Often misunderstood as 'being nice,' true co-regulation is the metabolic calibration of field-based relation.\"",
            "why_exiled": "\"Modern belonging tends to enforce conformity. Co-regulation gets instrumentalized to maintain false harmony or suppress conflict. And often, it only flows within in-groups, reinforcing exclusion, white supremacy, or anthropocentrism.\"",
            "what_possible": "\"Reclaiming it as a plural, uncomfortable, and reciprocal act makes space for attunement inside tension, not just in comfort.\"",
            "distortions": [{
                "name": "\"Savior urgency\"",
                "description": "\"Arises when someone attempts to co-regulate by overriding or 'fixing' the emotional field of another, rather than staying with discomfort. It is a reactive attempt to restore personal comfort by managing others.\""
              },{
                "name": "\"Superficial attunement\"",
                "description": "\"Appears as performative empathy—it replicates the gestures of connection without engaging with the deeper, messier undercurrents of rupture and relational repair.\""
              }],
            "color": "\"a855f7\"",
            "position_x":  0.4 ,
            "position_y":  0.1 
          },{
            "title": "\"Meta-Regulation\"",
            "subtitle": "\"Navigating Deep Time \\u0026 Complexity\"",
            "what_it_is": "\"Meta-regulation requires a degree of Neuro-decolonization, which is a concept developed by Cree elder Dr. Cash Ahenakew that refers to unwiring these harmful attachments and honouring our entangled nervous system—one attuned to and guided by collective and metabolic processes. Meta-regulation is a layered, deep-time-aware capacity to stay present while metabolizing intergenerational, ecological, and ancestral threads. It is a nervous system practice of holding space for what can't yet be resolved and choosing action not from urgency, but alignment.\"",
            "why_exiled": "\"Meta-regulation is often exiled because it slows things down. It exposes illusion, demands complicity, and resists short-termism. It challenges modern systems that reward only what is visible, quick, or profitable.\"",
            "what_possible": "\"Meta-regulation is what makes accountability possible across time and scale—it roots action in alignment, not reactivity.\"",
            "distortions": [{
                "name": "\"Trauma-stuckness\"",
                "description": "\"Emerges when individuals remain locked in past survival states, replaying old patterns as if they're still true. It restricts capacity to imagine future pathways or engage with slow repair.\""
              },{
                "name": "\"Fixing-as-control\"",
                "description": "\"The impulse to prematurely resolve complex tensions. It appears as saviorism or over-productivity and often reproduces harm in the name of 'doing good.' Meta-regulation composts this into humble alignment with the actual pace of healing and repair.\""
              }],
            "color": "\"7c3aed\"",
            "position_x":  0 ,
            "position_y":  0.5 
          }]
      },{
        "title": "\"Relational Integrity and Accountability\"",
        "description": "\"The capacity to act with visceral care inside entangled systems—without centering oneself, without purity posturing.\"",
        "why_matters": "\"Relational integrity is the ability to act with care, precision, and answerability inside entangled systems, without centering oneself, without purity posturing. This is where service, care, and accountability live—not as isolated virtues, but as co-arising states that can only exist in the space between. The ethics of presence here are visceral. They belong to the nervous system as much as the mind: humility that doesn't hide, boundaries that make intimacy possible, clarity that keeps power visible, and the willingness to stay woven into relation when the weave gets messy. Under modernity's political grammar, these capacities have been thinned out or replaced. Boundaries get reframed as private property lines. Clarity gets outsourced to ideology. Accountability gets swapped for public displays of guilt or moral branding. The result is brittle relations that fracture under conflict, avoid repair, and reproduce the same power-over dynamics they claim to resist.\"",
        "image": "\"/images/relational-integrity.jpg\"",
        "position_x":  0.65 ,
        "position_y":  0.9 ,
        "capacities": [{
            "title": "\"Boundary Clarity as Relational Practice\"",
            "subtitle": "\"Naming edges in ways that deepen rather than cut off relation\"",
            "what_it_is": "\"Boundary clarity is the ability to name and hold one's edges in a way that deepens relation rather than cuts it off. It's the somatic and political skill of knowing where I end and you begin—not as a separation, but as a meeting point. This clarity lives in the body: a felt sense of what strengthens reciprocity, what erodes it, and what power dynamics are at play in the moment. It also includes the capacity to recognize when you—or the community you belong to—are crossing, have crossed, or are benefiting from the crossing of another's boundaries, whether in the present or through historical harm.\"",
            "why_exiled": "\"Modernity's survival logics distort boundaries in two main ways: by erasing them entirely in the name of 'connection,' or by fortifying them as rigid walls of autonomy and control. Political clarity is similarly displaced—outsourced to abstract ideology rather than cultivated as a felt, situated discernment in real time.\"",
            "what_possible": "\"Restoring this capacity makes intimacy sustainable. It enables us to name power dynamics without freezing the relation in judgment, to protect the conditions for reciprocity, and to respond to rupture in ways that strengthen the weave rather than tear it further. In collective spaces, boundary clarity grounds trust because people know where they stand—and where they can meet, repair, and reweave.\"",
            "distortions": [{
                "name": "\"Boundaries as personal property lines\"",
                "description": "\"Weaponizing 'no' to protect privilege rather than foster equity.\""
              },{
                "name": "\"Over-flexibility as virtue\"",
                "description": "\"Dissolving all edges to be 'easy to work with,' masking power imbalances.\""
              },{
                "name": "\"Ideological clarity without embodiment\"",
                "description": "\"Knowing the 'right' political position but being unable to enact it somatically in live relation.\""
              },{
                "name": "\"Selective perception\"",
                "description": "\"Attuning only to when one's own boundaries are crossed, not when one is crossing another's.\""
              }],
            "color": "\"dc2626\"",
            "position_x":  -0.5 ,
            "position_y":  -0.1 
          },{
            "title": "\"Repair Literacy\"",
            "subtitle": "\"Entering, navigating, and completing processes of repair after rupture\"",
            "what_it_is": "\"Repair literacy is the ability to enter, navigate, and complete processes of repair after rupture—whether the rupture is intimate, communal, or systemic—without collapsing into shame, weaponizing harm, or bypassing the discomfort. It requires the skills of naming, listening, taking responsibility, and making amends in ways that are proportionate to the harm and responsive to the needs of those affected. In the context of boundary clarity, repair literacy is the follow-through: the capacity to act when we recognize we have crossed someone's edge, or when our communities (past or present) have done so.\"",
            "why_exiled": "\"Modernity trains us to treat conflict and harm as either personal failures to be hidden or as battles to be won. This creates cultures of avoidance, blame, and punishment rather than repair. Under colonial-capitalist logics, historical harms are either erased ('That was in the past') or exploited for political capital, while personal conflicts often get abandoned rather than addressed.\"",
            "what_possible": "\"Restoring repair literacy allows us to stay in the weave when it's frayed, to rebuild trust after rupture, and to hold complexity without demanding premature resolution. In collective spaces, it creates resilience—because people know that harm is neither ignored nor escalated into irreparable fracture.\"",
            "distortions": [{
                "name": "\"Transactional apology\"",
                "description": "\"Offering quick 'sorrys' as image management without changing behavior.\""
              },{
                "name": "\"Punitive accountability\"",
                "description": "\"Equating repair with punishment or expulsion, erasing the possibility of transformation.\""
              },{
                "name": "\"Performative vulnerability\"",
                "description": "\"Sharing one's guilt or shame publicly as a way to reclaim social standing, rather than centering the needs of those harmed.\""
              },{
                "name": "\"Historical distancing\"",
                "description": "\"Treating systemic or historical harms as irrelevant to present-day repair responsibilities.\""
              }],
            "color": "\"b91c1c\"",
            "position_x":  0.3 ,
            "position_y":  0.4 
          },{
            "title": "\"Visceral Accountability\"",
            "subtitle": "\"Acting with care, precision, and answerability from inside the weave\"",
            "what_it_is": "\"Visceral accountability is the capacity to act with care, precision, and answerability from inside the weave, without centering oneself or slipping into purity posturing. It is accountability felt in the gut and the nervous system—not just as an intellectual or moral stance. This capacity keeps us grounded in service to something larger than individual comfort or reputation, and is expressed through actions that maintain or restore the health of the relational field. It is the ongoing practice of staying oriented to the needs of the whole—especially when those needs are inconvenient, uncomfortable, or require letting go of protagonism.\"",
            "why_exiled": "\"Modernity has stripped accountability of its relational metabolism, turning it into either punitive control or a branding exercise. Acting from genuine answerability has been replaced by acting from fear of consequence or desire for recognition. Under these conditions, 'being accountable' often means performing remorse in public or withdrawing to avoid scrutiny—neither of which actually repair trust or redistribute power.\"",
            "what_possible": "\"Restoring visceral accountability shifts the frame: it's not about protecting oneself, it's about protecting the conditions for dignity, reciprocity, and repair across all scales of relation. It makes possible a form of leadership that doesn't center authority but rather centers the collective's capacity to stay in complex relation.\"",
            "distortions": [{
                "name": "\"Accountability as surveillance\"",
                "description": "\"Equating answerability with constant policing of others or oneself.\""
              },{
                "name": "\"Purity posturing\"",
                "description": "\"Using morality as a way to elevate status or authority, rather than to deepen connection.\""
              },{
                "name": "\"Self-centering in accountability\"",
                "description": "\"Making the process about one's own redemption arc instead of the needs of those harmed.\""
              },{
                "name": "\"Risk avoidance\"",
                "description": "\"Mistaking avoidance of harm for the work of repair, resulting in inaction or disengagement from necessary tensions.\""
              }],
            "color": "\"991b1b\"",
            "position_x":  0.1 ,
            "position_y":  0.1 
          }]
      },{
        "title": "\"Somatic Relationality\"",
        "description": "\"The Sensing Web where the body is not a tool, but a terrain; not a site of mastery, but a site of relation.\"",
        "why_matters": "\"Modernity has trained us to treat the body like an object: something to manage, optimize, decorate, or transcend. Under colonial systems, the body is either hyper-visible (as a site of extraction, classification, and control) or absent (erased through disembodied cognition). Both orientations sever the body from its capacity to listen, transmit, and metabolize information as a living node in a vast, entangled web. Somatic Relationality is not about 'getting into the body'—it's about remembering that you are already a body, and that your body is always in relation. To land in this cluster is to move from instrumental embodiment to relational presence. From 'what can I do with my body' to 'what is my body attuning to right now?' This cluster supports quorum sensing at the somatic level. Not as performance. Not as catharsis. But as ongoing, slow, reciprocal responsiveness to the field.\"",
        "image": "\"/images/somatic-relationality.jpg\"",
        "position_x":  0.75 ,
        "position_y":  0.15 ,
        "capacities": [{
            "title": "\"Reciprocal Sensory Listening\"",
            "subtitle": "\"Feeling with, not just sensing at\"",
            "what_it_is": "\"Reciprocal Sensory Listening is the embodied capacity to sense as a relational act—not just as perception, but as participation. It's the shift from 'I am observing something' to 'I am being touched by it.' This capacity recognizes that every act of sensing is also an act of being sensed. The world is not passive data; it listens back. This means listening through skin, breath, posture, humidity, texture, silence. It's listening not only with ears, but with fascia, with micro-movements, with the heartbeat's shift when someone walks in the room.\"",
            "why_exiled": "\"Under colonial modernity, sensation is treated as raw input for centralized processing—a resource to be interpreted by the rational mind. The body is reduced to a feedback machine, and its porous relational intelligence is dismissed as distraction, oversensitivity, or mysticism.\"",
            "what_possible": "\"Reclaiming this capacity interrupts the idea that knowledge is always spoken, that change comes only through action, or that relation must be explicit. It reminds us that the body can attune, signal, and shift long before language arrives—and that this is already doing the work.\"",
            "distortions": [{
                "name": "\"Sensation extraction\"",
                "description": "\"When the body is used to collect 'data' for emotional labor, artistic production, or spiritual insight without being cared for as an ecosystem.\""
              },{
                "name": "\"Somatic detachment\"",
                "description": "\"The habit of overriding or dismissing bodily knowing in favor of intellectual or institutional legitimacy. Often shows up as 'I need to make sure this makes sense before I trust it.'\""
              },{
                "name": "\"Anthropocentric listening\"",
                "description": "\"Tuning only to human signals, missing the field of plants, air, land, architecture, ancestors.\""
              }],
            "color": "\"06b6d4\"",
            "position_x":  -0.5 ,
            "position_y":  -0.2 
          },{
            "title": "\"Somatic Permission \\u0026 the Body as Conduit\"",
            "subtitle": "\"Granting the body full license to be a terrain\"",
            "what_it_is": "\"This capacity is about granting the body full license to be a terrain, not a project. It's the invitation to stop managing the body and instead let it express, leak, tremble, stutter, soften, ache, move—without having to justify or decode it. Somatic permission is not indulgence; it's decolonial disobedience to the control-based logic that demands the body always be knowable, containable, or useful. When the body is permitted to be what it already is, it can begin to act as a conduit—not just a container of self, but a passage for memory, rhythm, sound, ancestral residue, collective charge.\"",
            "why_exiled": "\"This capacity has been exiled by centuries of bodily discipline: the regulation of expression, the commodification of productivity, the criminalization of non-compliance. Bodies—especially racialized, gendered, disabled, queer, poor bodies—are taught to contain themselves to survive.\"",
            "what_possible": "\"What becomes possible when this is interrupted is radical: grief that moves, rage that vibrates, joy that escapes choreography. The body regains its right to be a passage, not a performance. And from that place, sound, sensation, and movement become metabolizers, not messages.\"",
            "distortions": [{
                "name": "\"Body management\"",
                "description": "\"The internalized mandate to present the body as readable, tidy, non-threatening. Often includes masking or minimizing sensation in group spaces.\""
              },{
                "name": "\"Expressive scarcity\"",
                "description": "\"The belief that there's not enough room for your full expression unless it's productive, beautiful, or safe.\""
              },{
                "name": "\"Performative presence\"",
                "description": "\"Staying in control of how you're being perceived instead of being metabolically present to what's happening.\""
              }],
            "color": "\"0891b2\"",
            "position_x":  0.3 ,
            "position_y":  0.4 
          },{
            "title": "\"Resonance as Relation \\u0026 Silence as Signal\"",
            "subtitle": "\"Trusting the medium between bodies\"",
            "what_it_is": "\"This capacity is about trusting the medium—the space between bodies, the silence between sounds—as an active part of relational communication. If reciprocal sensory listening is the radar (how we pick up signals) and somatic permission is the response mechanism (how we transmit), resonance and silence are the medium—the shared field where those signals and responses ripple, reverberate, settle, or shift without needing to be named. It's the relational space where vibration is enough.\"",
            "why_exiled": "\"Resonance and silence have been exiled by the logics of urgency, productivity, and verbal dominance—which frame non-verbal space as awkward, empty, or useless. Capitalism and coloniality require that all relational charge be immediately translated into action, data, or affirmation, leaving no room for ambiguity or quiet metabolization.\"",
            "what_possible": "\"Bringing this capacity back makes space for communication that doesn't collapse difference—where relation can live in tension, in pause, in the slow reverberation of what has been sensed but not resolved. It allows collective fields to settle, deepen, and shift below the radar of words.\"",
            "distortions": [{
                "name": "\"Over-translation\"",
                "description": "\"The compulsion to explain or narrate relational shifts, rather than letting them reverberate unspoken.\""
              },{
                "name": "\"Response-seeking\"",
                "description": "\"Needing immediate confirmation that 'something happened,' which pulls energy out of the shared field.\""
              },{
                "name": "\"Discomfort with ambiguity\"",
                "description": "\"Misreading silence as disengagement or failure, rather than metabolizing space for resonance to work.\""
              }],
            "color": "\"0e7490\"",
            "position_x":  0.6 ,
            "position_y":  -0.3 
          }]
      }]
</script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/d3/7.8.5/d3.min.js"></script>

<script>
    let clustersData = [];

    try {
        const dataScript = document.getElementById('clusters-data');
        if (dataScript && dataScript.textContent) {
            clustersData = JSON.parse(dataScript.textContent);
            clustersData = clustersData.map(cluster => {
                if (cluster.image && typeof cluster.image === 'string') {
                    cluster.image = cluster.image.replace(/^["']|["']$/g, '');
                    cluster.image = decodeURIComponent(cluster.image);
                    cluster.image = cluster.image.replace(/['"]/g, '');
                }
                return cluster;
            });
        }
    } catch (error) {
        console.error('Error parsing cluster data:', error);
    }

    class CapacitiesVisualization {
        constructor() {
            this.currentCluster = null;
            this.svg = d3.select('#network-svg');
            this.width = 0;
            this.height = 0;
            this.simulation = null;
            this.physicsObjects = [];
            this.animationRunning = false;
            this.containerBounds = {};
            this.init();
        }

        init() {
            if (clustersData.length === 0) {
                this.showNoDataMessage();
                return;
            }
            this.populateClusterList();
            this.createFloatingThumbnails();
            this.setupEventListeners();
            this.startFloatingAnimation();
            this.updateLayoutHeight();
            window.addEventListener('resize', () => this.updateLayoutHeight());
        }

        updateLayoutHeight() {
            const header = document.querySelector('header');
            const footer = document.querySelector('footer');
            const layout = document.querySelector('.clusters-layout');
            
            if (!layout || window.innerWidth <= 768) return;
            
            const headerHeight = header ? header.offsetHeight : 0;
            const footerHeight = footer ? footer.offsetHeight : 0;
            const availableHeight = window.innerHeight - headerHeight - footerHeight;
            
            layout.style.height = availableHeight + 'px';
            layout.style.maxHeight = availableHeight + 'px';
        }

        showNoDataMessage() {
            const clusterList = document.getElementById('cluster-list');
            clusterList.innerHTML = '<li style="color: #cbd5e1; padding: 20px; text-align: center;">No clusters found</li>';
            const container = document.getElementById('thumbnails-container');
            container.innerHTML = '<div style="color: #cbd5e1; padding: 50px; text-align: center;">Add cluster content files</div>';
        }

        populateClusterList() {
            const clusterList = document.getElementById('cluster-list');
            clusterList.innerHTML = '';
            clustersData.forEach((cluster, index) => {
                const li = document.createElement('li');
                li.className = 'cluster-item';
                const link = document.createElement('a');
                link.className = 'cluster-link';
                link.href = '#';
                link.innerHTML = `
                    <div class="cluster-title">${cluster.title}</div>
                    <div class="cluster-description">${cluster.description}</div>
                `;
                link.addEventListener('click', (e) => {
                    e.preventDefault();
                    this.openClusterModal(index);
                });
                li.appendChild(link);
                clusterList.appendChild(li);
            });
        }

        createFloatingThumbnails() {
            const container = document.getElementById('thumbnails-container');
            container.innerHTML = '';
            const containerRect = container.getBoundingClientRect();
            const containerWidth = containerRect.width - 80;
            const containerHeight = containerRect.height - 80;
            const thumbnailSize = 160;
            
            clustersData.forEach((cluster, index) => {
                const thumbnail = document.createElement('div');
                thumbnail.className = 'floating-thumbnail';
                
                const cols = Math.min(3, clustersData.length);
                const rows = Math.ceil(clustersData.length / cols);
                const col = index % cols;
                const row = Math.floor(index / cols);
                
                const usableWidth = containerWidth - 160;
                const usableHeight = containerHeight - 160;
                const cellWidth = usableWidth / cols;
                const cellHeight = usableHeight / rows;
                
                const gridStartX = (containerWidth - (cols * cellWidth)) / 2 + 80;
                const gridStartY = (containerHeight - (rows * cellHeight)) / 2 + 80;
                
                let x = gridStartX + (col * cellWidth) + (cellWidth / 2);
                let y = gridStartY + (row * cellHeight) + (cellHeight / 2);
                
                x += (Math.random() - 0.5) * Math.min(cellWidth * 0.3, 60);
                y += (Math.random() - 0.5) * Math.min(cellHeight * 0.3, 60);
                
                x = Math.max(thumbnailSize/2 + 40, Math.min(x, containerWidth - thumbnailSize/2 + 40));
                y = Math.max(thumbnailSize/2 + 40, Math.min(y, containerHeight - thumbnailSize/2 + 40));
                
                thumbnail.style.left = (x - thumbnailSize/2) + 'px';
                thumbnail.style.top = (y - thumbnailSize/2) + 'px';
                
                if (cluster.image && cluster.image.trim() !== '') {
                    const img = document.createElement('img');
                    img.src = cluster.image;
                    img.alt = cluster.title;
                    img.onerror = () => {
                        thumbnail.innerHTML = `<div class="thumbnail-fallback">${cluster.title}</div>`;
                    };
                    thumbnail.appendChild(img);
                } else {
                    const fallback = document.createElement('div');
                    fallback.className = 'thumbnail-fallback';
                    fallback.textContent = cluster.title;
                    thumbnail.appendChild(fallback);
                }
                
                thumbnail.addEventListener('click', () => {
                    this.openClusterModal(index);
                });
                
                container.appendChild(thumbnail);
            });
        }

        startFloatingAnimation() {
            const thumbnails = document.querySelectorAll('.floating-thumbnail');
            const container = document.getElementById('thumbnails-container');
            if (!container || thumbnails.length === 0) return;
            
            this.physicsObjects = Array.from(thumbnails).map((thumbnail, index) => {
                return {
                    element: thumbnail,
                    x: parseFloat(thumbnail.style.left) + 80,
                    y: parseFloat(thumbnail.style.top) + 80,
                    vx: (Math.random() - 0.5) * 2,
                    vy: (Math.random() - 0.5) * 2,
                    radius: 80,
                    mass: 1,
                    id: index
                };
            });
            
            this.containerBounds = {
                left: 0,
                top: 0,
                right: container.clientWidth,
                bottom: container.clientHeight
            };
            
            this.startPhysicsLoop();
        }

        startPhysicsLoop() {
            if (this.animationRunning) return;
            this.animationRunning = true;
            const animate = () => {
                if (!this.animationRunning) return;
                this.updatePhysics();
                this.renderThumbnails();
                requestAnimationFrame(animate);
            };
            animate();
        }

        updatePhysics() {
            if (!this.physicsObjects) return;
            this.physicsObjects.forEach(obj => {
                obj.x += obj.vx;
                obj.y += obj.vy;
                
                if (obj.x - obj.radius <= this.containerBounds.left || 
                    obj.x + obj.radius >= this.containerBounds.right) {
                    obj.vx *= -0.8;
                    obj.x = Math.max(obj.radius, Math.min(this.containerBounds.right - obj.radius, obj.x));
                }
                
                if (obj.y - obj.radius <= this.containerBounds.top || 
                    obj.y + obj.radius >= this.containerBounds.bottom) {
                    obj.vy *= -0.8;
                    obj.y = Math.max(obj.radius, Math.min(this.containerBounds.bottom - obj.radius, obj.y));
                }
                
                const maxSpeed = 3;
                const speed = Math.sqrt(obj.vx * obj.vx + obj.vy * obj.vy);
                if (speed > maxSpeed) {
                    obj.vx = (obj.vx / speed) * maxSpeed;
                    obj.vy = (obj.vy / speed) * maxSpeed;
                }
            });
            
            for (let i = 0; i < this.physicsObjects.length; i++) {
                for (let j = i + 1; j < this.physicsObjects.length; j++) {
                    this.handleCollision(this.physicsObjects[i], this.physicsObjects[j]);
                }
            }
        }

        handleCollision(obj1, obj2) {
            const dx = obj2.x - obj1.x;
            const dy = obj2.y - obj1.y;
            const distance = Math.sqrt(dx * dx + dy * dy);
            const minDistance = obj1.radius + obj2.radius;
            
            if (distance < minDistance) {
                const overlap = minDistance - distance;
                const separationX = (dx / distance) * (overlap / 2);
                const separationY = (dy / distance) * (overlap / 2);
                
                obj1.x -= separationX;
                obj1.y -= separationY;
                obj2.x += separationX;
                obj2.y += separationY;
                
                const normalX = dx / distance;
                const normalY = dy / distance;
                const relativeVelocityX = obj2.vx - obj1.vx;
                const relativeVelocityY = obj2.vy - obj1.vy;
                const velocityAlongNormal = relativeVelocityX * normalX + relativeVelocityY * normalY;
                
                if (velocityAlongNormal > 0) return;
                
                const restitution = 0.6;
                const impulse = -(1 + restitution) * velocityAlongNormal;
                const impulseX = impulse * normalX;
                const impulseY = impulse * normalY;
                
                obj1.vx -= impulseX * 0.5;
                obj1.vy -= impulseY * 0.5;
                obj2.vx += impulseX * 0.5;
                obj2.vy += impulseY * 0.5;
            }
        }

        renderThumbnails() {
            if (!this.physicsObjects) return;
            this.physicsObjects.forEach(obj => {
                obj.element.style.left = (obj.x - obj.radius) + 'px';
                obj.element.style.top = (obj.y - obj.radius) + 'px';
            });
        }

        setupEventListeners() {
            const closeModal = document.getElementById('close-modal');
            if (closeModal) {
                closeModal.addEventListener('click', () => this.closeClusterModal());
            }

            const toggleInfo = document.getElementById('toggle-info');
            const modalHeader = document.getElementById('modal-header');
            if (toggleInfo && modalHeader) {
                toggleInfo.addEventListener('click', () => {
                    modalHeader.classList.toggle('collapsed');
                    toggleInfo.textContent = modalHeader.classList.contains('collapsed') ? 'Show Info' : 'Hide Info';
                });
            }

            const closeDetail = document.getElementById('close-detail');
            if (closeDetail) {
                closeDetail.addEventListener('click', () => this.closeCapacityDetail());
            }

            const modal = document.getElementById('cluster-modal');
            if (modal) {
                modal.addEventListener('click', (e) => {
                    if (e.target.id === 'cluster-modal') {
                        this.closeClusterModal();
                    }
                });
            }

            document.addEventListener('keydown', (e) => {
                if (e.key === 'Escape') {
                    const capacityDetail = document.getElementById('capacity-detail');
                    const clusterModal = document.getElementById('cluster-modal');
                    
                    if (capacityDetail && capacityDetail.classList.contains('active')) {
                        this.closeCapacityDetail();
                    } else if (clusterModal && clusterModal.classList.contains('active')) {
                        this.closeClusterModal();
                    }
                }
            });

            window.addEventListener('resize', () => {
                if (this.currentCluster !== null) {
                    this.updateNetworkDimensions();
                    this.drawNetwork();
                }
                this.updateContainerBounds();
                setTimeout(() => {
                    this.animationRunning = false;
                    this.createFloatingThumbnails();
                    this.startFloatingAnimation();
                }, 100);
            });
        }

        openClusterModal(clusterId) {
            this.currentCluster = clusterId;
            const cluster = clustersData[clusterId];
            
            document.getElementById('modal-title').textContent = cluster.title;
            document.getElementById('modal-description').textContent = cluster.description;
            
            const whyMatters = document.getElementById('why-matters');
            if (cluster.why_matters && cluster.why_matters.trim() !== '') {
                whyMatters.innerHTML = `<h4>Why This Cluster Matters:</h4><p>${cluster.why_matters}</p>`;
                whyMatters.style.display = 'block';
            } else {
                whyMatters.style.display = 'none';
            }
            
            const modalHeader = document.getElementById('modal-header');
            const toggleInfo = document.getElementById('toggle-info');
            if (modalHeader && toggleInfo) {
                modalHeader.classList.remove('collapsed');
                toggleInfo.textContent = 'Hide Info';
            }
            
            document.getElementById('cluster-modal').classList.add('active');
            
            setTimeout(() => {
                this.updateNetworkDimensions();
                this.drawNetwork();
            }, 100);
        }

        closeClusterModal() {
            const modal = document.getElementById('cluster-modal');
            if (modal) {
                modal.classList.remove('active');
            }
            this.closeCapacityDetail();
            this.currentCluster = null;
            if (this.simulation) {
                this.simulation.stop();
            }
            this.svg.selectAll("*").remove();
        }

        updateNetworkDimensions() {
            const container = document.querySelector('.network-container');
            if (container) {
                this.width = container.clientWidth;
                this.height = container.clientHeight;
                this.svg.attr('width', this.width).attr('height', this.height);
            }
        }

        drawNetwork() {
            if (this.currentCluster === null || !clustersData[this.currentCluster]) return;
            
            const cluster = clustersData[this.currentCluster];
            this.svg.selectAll("*").remove();

            const defs = this.svg.append('defs');
            const centralGradient = defs.append('radialGradient').attr('id', 'centralGradient');
            centralGradient.append('stop').attr('offset', '0%').attr('stop-color', '#a855f7').attr('stop-opacity', 0.8);
            centralGradient.append('stop').attr('offset', '100%').attr('stop-color', '#1e293b').attr('stop-opacity', 0.9);

            const nodes = [{
                id: 'center',
                title: cluster.title,
                type: 'cluster',
                x: this.width / 2,
                y: this.height / 2,
                fx: this.width / 2,
                fy: this.height / 2
            }];

            const links = [];

            if (cluster.capacities && cluster.capacities.length > 0) {
                cluster.capacities.forEach((capacity, index) => {
                    const nodeId = `capacity-${index}`;
                    nodes.push({
                        id: nodeId,
                        title: capacity.title,
                        subtitle: capacity.subtitle,
                        type: 'capacity',
                        capacity: capacity,
                        color: capacity.color || "rgb(139, 92, 246)"
                    });
                    links.push({ source: 'center', target: nodeId });
                });
            }

            this.simulation = d3.forceSimulation(nodes)
                .force('link', d3.forceLink(links).id(d => d.id).distance(150))
                .force('charge', d3.forceManyBody().strength(-300))
                .force('center', d3.forceCenter(this.width / 2, this.height / 2))
                .force('collision', d3.forceCollide().radius(60));

            const link = this.svg.append('g').selectAll('path').data(links).enter().append('path')
                .attr('stroke', '#8b5cf6').attr('stroke-width', 2).attr('opacity', 0.6).attr('fill', 'none');

            const node = this.svg.append('g').selectAll('g').data(nodes).enter().append('g')
                .call(d3.drag().on('start', this.dragstarted.bind(this)).on('drag', this.dragged.bind(this)).on('end', this.dragended.bind(this)));

            node.filter(d => d.type === 'cluster').append('circle')
                .attr('r', 50).attr('fill', 'url(#centralGradient)').attr('stroke', '#a855f7').attr('stroke-width', 3);

            node.filter(d => d.type === 'cluster').append('text')
                .attr('text-anchor', 'middle').attr('dy', '.35em').attr('fill', '#ffffff')
                .attr('font-weight', 'bold').attr('font-size', '12px').text(d => d.title);

            const capacityNodes = node.filter(d => d.type === 'capacity');

            capacityNodes.append('circle').attr('r', 35).attr('fill', d => d.color)
                .attr('stroke', '#ffffff').attr('stroke-width', 2).attr('opacity', 0.8).style('cursor', 'pointer')
                .on('mouseover', function() { d3.select(this).transition().duration(200).attr('r', 38); })
                .on('mouseout', function() { d3.select(this).transition().duration(200).attr('r', 35); });

            capacityNodes.append('text').attr('text-anchor', 'middle').attr('dy', '-5')
                .attr('fill', '#ffffff').attr('font-weight', 'bold').attr('font-size', '10px').style('cursor', 'pointer')
                .text(d => d.title && d.title.length > 12 ? d.title.substring(0, 12) + '...' : d.title || '');

            capacityNodes.append('text').attr('text-anchor', 'middle').attr('dy', '8')
                .attr('fill', '#ffffff').attr('font-size', '8px').attr('opacity', 0.8).style('cursor', 'pointer')
                .text(d => d.subtitle && d.subtitle.length > 15 ? d.subtitle.substring(0, 15) + '...' : d.subtitle || '');

            capacityNodes.on('click', (event, d) => {
                if (d.type === 'capacity') {
                    this.openCapacityDetail(d.capacity);
                }
            });

            this.simulation.on('tick', () => {
                link.attr('d', d => {
                    const dx = d.target.x - d.source.x;
                    const dy = d.target.y - d.source.y;
                    const dr = Math.sqrt(dx * dx + dy * dy) * 0.3;
                    return `M${d.source.x},${d.source.y}A${dr},${dr} 0 0,1 ${d.target.x},${d.target.y}`;
                });
                node.attr('transform', d => `translate(${d.x},${d.y})`);
            });
        }

        openCapacityDetail(capacity) {
            if (!capacity) return;
            document.getElementById('capacity-title').textContent = capacity.title || '';
            document.getElementById('capacity-subtitle').textContent = capacity.subtitle || '';
            document.getElementById('capacity-what-it-is').innerHTML = this.parseMarkdown(capacity.what_it_is || '');
            document.getElementById('capacity-why-exiled').innerHTML = this.parseMarkdown(capacity.why_exiled || '');
            document.getElementById('capacity-what-possible').innerHTML = this.parseMarkdown(capacity.what_possible || '');

            const distortionsList = document.getElementById('capacity-distortions');
            distortionsList.innerHTML = '';
            
            if (capacity.distortions && capacity.distortions.length > 0) {
                capacity.distortions.forEach(distortion => {
                    const li = document.createElement('li');
                    li.className = 'distortion-item';
                    li.innerHTML = `
                        <div class="distortion-name">${distortion.name || ''}</div>
                        <div class="distortion-description">${distortion.description || ''}</div>
                    `;
                    distortionsList.appendChild(li);
                });
            }
            document.getElementById('capacity-detail').classList.add('active');
        }

        closeCapacityDetail() {
            const detail = document.getElementById('capacity-detail');
            if (detail) {
                detail.classList.remove('active');
            }
        }

        parseMarkdown(text) {
            if (!text) return '';
            return text.replace(/\*\*(.*?)\*\*/g, '<strong>$1</strong>').replace(/\*(.*?)\*/g, '<em>$1</em>').replace(/\n/g, '<br>');
        }

        dragstarted(event, d) {
            if (!event.active) this.simulation.alphaTarget(0.3).restart();
            d.fx = d.x;
            d.fy = d.y;
        }

        dragged(event, d) {
            d.fx = event.x;
            d.fy = event.y;
        }

        dragended(event, d) {
            if (!event.active) this.simulation.alphaTarget(0);
            if (d.type !== 'cluster') {
                d.fx = null;
                d.fy = null;
            }
        }

        updateContainerBounds() {
            const container = document.getElementById('thumbnails-container');
            if (container) {
                this.containerBounds = {
                    left: 0,
                    top: 0,
                    right: container.clientWidth,
                    bottom: container.clientHeight
                };
            }
        }
    }

    document.addEventListener('DOMContentLoaded', () => {
        new CapacitiesVisualization();
    });
</script>

        </div>
    </main>
    
    <footer style="background: rgba(15, 15, 35, 0.8); backdrop-filter: blur(10px); border-top: 1px solid rgba(139, 92, 246, 0.2); padding: 20px; text-align: center; color: #cbd5e1; margin-top: auto;">
    <p>&copy; 2025 Reactivating Exiled Capacities.</p>
</footer>
    
    
    <script>
      if (window.netlifyIdentity) {
        window.netlifyIdentity.on("init", user => {
          if (!user) {
            window.netlifyIdentity.on("login", () => {
              document.location.href = "/admin/";
            });
          }
        });
      }
    </script>
    
    
</body>
</html>