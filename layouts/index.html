{{ define "main" }}
{{ $backgroundImage := .Site.Params.backgroundImage | default "/images/soil-background.jpg" | relURL }}
<div class="splash-layout" style="--bg-image: url('{{ $backgroundImage }}');">
    <!-- Background image -->
    <div class="background-container">
        <div class="background-overlay"></div>
    </div>

    <!-- 3D Canvas -->
    <canvas id="myceliumCanvas"></canvas>

    <!-- Central Content -->
    <div class="content-container">
        <button class="central-button" id="centralButton">
            {{ .Site.Title | default "Recovering Exiled Capacities" }}
        </button>
    </div>

    <!-- Instructions -->
    <div class="instructions">
        Website under construction
    </div>

    <!-- Loading indicator -->
    <div class="loading" id="loading">Growing network...</div>

    <!-- Debug controls (press 'D' to toggle) -->
    <div class="debug-controls" id="debugControls">
        <div>Debug Controls</div>
        <button onclick="regenerateMyceliumNetwork()">Regenerate</button>
        <button onclick="myceliumNetwork.toggleWireframe()">Wireframe</button>
        <button onclick="myceliumNetwork.changeColorScheme()">Color</button>
        <div class="control-row">
            <label>Branches:</label>
            <input type="range" id="branchCount" min="3" max="12" value="8">
            <span id="branchValue">8</span>
        </div>
    </div>
</div>
{{ end }}

{{ define "scripts" }}
<script>
    // Debug controls setup - only the page-specific JavaScript
    document.addEventListener('DOMContentLoaded', () => {
        // Debug controls toggle
        document.addEventListener('keydown', (e) => {
            if (e.key.toLowerCase() === 'd') {
                const debug = document.getElementById('debugControls');
                debug.classList.toggle('visible');
            }
        });
        
        // Branch count slider
        const branchSlider = document.getElementById('branchCount');
        const branchValue = document.getElementById('branchValue');
        if (branchSlider && branchValue) {
            branchSlider.addEventListener('input', (e) => {
                branchValue.textContent = e.target.value;
            });
        }
    });
</script>
{{ end }}