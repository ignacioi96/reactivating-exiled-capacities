{{ define "main" }}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{ .Site.Title }}</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/7.8.5/d3.min.js"></script>
    {{ if fileExists "assets/css/main.css" }}
        {{ $style := resources.Get "css/main.css" | resources.Minify }}
        <link rel="stylesheet" href="{{ $style.Permalink }}">
    {{ else }}
        <link rel="stylesheet" href="/css/main.css">
    {{ end }}
</head>
<body>
    {{ partial "header.html" . }}

    <main>
        <aside class="clusters-sidebar">
            <h2>Clusters</h2>
            <ul class="cluster-list" id="cluster-list">
                <li style="color: #cbd5e1; padding: 20px; text-align: center;">Loading clusters...</li>
            </ul>
        </aside>

        <div class="content-area">
            <div class="thumbnails-container" id="thumbnails-container">
                <div style="color: #cbd5e1; padding: 50px; text-align: center; font-size: 1.2rem;">Loading visualization...</div>
            </div>
        </div>
    </main>

    <!-- Cluster Visualization Modal -->
    <div class="cluster-modal" id="cluster-modal">
        <div class="modal-content">
            <button class="close-modal" id="close-modal">&times;</button>
            <div class="modal-header">
                <h2 class="modal-title" id="modal-title"></h2>
                <p class="modal-description" id="modal-description"></p>
                <div class="why-matters" id="why-matters"></div>
            </div>
            <div class="network-container">
                <svg class="network-svg" id="network-svg"></svg>
            </div>
        </div>
        
        <!-- Capacity Detail Panel -->
        <div class="capacity-detail" id="capacity-detail">
            <button class="close-detail" id="close-detail">&times;</button>
            <h3 id="capacity-title"></h3>
            <p class="subtitle" id="capacity-subtitle"></p>
            <div class="detail-section">
                <h4>What it is</h4>
                <div id="capacity-what-it-is"></div>
            </div>
            <div class="detail-section">
                <h4>Why it's been exiled</h4>
                <div id="capacity-why-exiled"></div>
            </div>
            <div class="detail-section">
                <h4>What it makes possible</h4>
                <div id="capacity-what-possible"></div>
            </div>
            <div class="detail-section">
                <h4>Distortions</h4>
                <ul class="distortions-list" id="capacity-distortions"></ul>
            </div>
        </div>
    </div>

    <script src="/js/clusters-app.js"></script>

    {{ partial "footer.html" . }}
</body>
</html>
{{ end }}